/*----------------DEFINED START-------------------*/

//localStorage.host = "http://192.168.0.13/webservices/";
//localStorage.host = "http://192.168.0.12/webservices/";
//localStorage.host = "http://beta.xstok.com/webservices/";
localStorage.host = "http://fa.xstok.com/webservices/";
//localStorage.host = "http://www.xstok.com/webservices/";
localStorage.device = 'Android';
localStorage.vr = 'new';
localStorage.key_code = 'euhe68vjdr1aX4F091c7aCggSMBf0A7M';
localStorage.curate_auction = 1;
localStorage.private_auction = 2;
localStorage.closed_bid_auction = 3;
localStorage.assorted_auction = 4;
localStorage.reserve_value_auction = 5;
localStorage.no_room_wise_auction__ = 'No Room wise Auction is Active';
localStorage.no_single_auction__ = 'No Single Auction is Active';
localStorage.tender_ends_qoute__ = 'Tender Will end in: ';
localStorage.Auction_ends_qoute__ = 'Auction Will end in: ';
localStorage.lot_created__ = 'Lot Has been created';
localStorage.lot_updated__ = 'Lot Has been updated';
localStorage.lot_already__ = 'Product is already present in other lot';
localStorage.lot_used_unused__ = 'Some product are already added';
localStorage.room_created__ = 'Room Has been created';
localStorage.room_updated__ = 'Room Has been updated';
localStorage.room_already__ = 'Lot is already Used';
localStorage.room_used_unused__ = 'Some Lot are already added';
localStorage.room_Name_Exist__ = 'Room Name already exist';
localStorage.bid_place_succ__ = 'Your Bid is placed';
localStorage.bid_No_place__ = '-';
localStorage.bid_place_alredy__ = 'You already placed a bid';
localStorage.bid_winner__ = "Sorry you can't bid again, you are the highest bidder";
localStorage.bid_select_error__ = 'Select/Enter Bid First';
localStorage.shipment_info_success__ = 'Shipment Detail Has been Saved';
localStorage.shipment_info_error__ = 'Shipment Detail has error';
localStorage.auction_expired__ = 'Offer Expired!';
localStorage.winner__ = 'You are Winning';
localStorage.winning__ = 'Winning';
localStorage.live__ = 'Ready for Bidding';
localStorage.won__ = 'Congratulations, you have Won!';
localStorage.lost__ = "Sorry, you didn't Win";
localStorage.withdraw__ = 'Withdraw';
localStorage.sold__ = 'Sold';
localStorage.losing__ = 'Losing';
localStorage.sold_out_ = 'Auction Sold Out';
localStorage.out_bid_ = 'You have been Outbid';
localStorage.withdraw_msg__ = 'You have Withdrawn';
localStorage.auction_cancel__ = 'Auction has been cancelled';
localStorage.withdraw_winner_msg__ = "Sorry you can't withdraw from this auction, you are the highest bidder";
localStorage.withdraw_sure_msg__ = "Are you sure, you want to withdraw from this lot?";
localStorage.withdraw_empty__ = 'You are not participating in this Auction';
localStorage.bid_auto_place_alredy__ = 'You have already placed an autobid for same amount!!';
localStorage.bid_auto_place_succ__ = 'Your Autobid is placed and its active';
localStorage.bid_numeric_error = 'Please enter numeric characters only';
localStorage.bid_place_error = 'Place Higher Bid';
localStorage.auto_bid_place_error = 'Auto bid lower than the min. increment amount';
localStorage.auto_bid_place_error_unit_price = 'Auto bid should be higher than the per unit price';
localStorage.auto_bid_out_error = 'You have been out bid from this lot';
localStorage.buy_now_admin_approval = 'You have the highest bid. The supplier is considering your bid as the reserve price has not been met';
localStorage.email_auction_msg = 'Hi! I found this on XSTOK and thought you might like it! Check it out now!';
localStorage.shipping_auction_msg = 'Hi! want to know more about Shipping!';
localStorage.what_are_waiting_ = 'What are you waiting for!! Enter the Game';
localStorage.Added = 'Added to => ';
localStorage.tax_vat = 'VAT';
localStorage.tax_sales_tax = 'Sales Tax';
localStorage.tax_service_tax = 'Service Tax';
localStorage.ship_xstok = 'Xstok';
localStorage.ship_other = 'Self';
localStorage.EMD_over__ = 'You have insufficient EMD. Proceed to top up EMD';
localStorage.Auction_archived_days__ = 3;
localStorage.direct_acceess = 'Direct access restricted';
localStorage.confirm_place_bid = 'Confirm bid of ';
localStorage.confirm_offer_of_bid = "Confirm offer of ";
localStorage.confirm_place_auto_bid = 'Confirm Auto bid of ';
//localStorage.auction_noti_text ='Auction '.$lot_name_['name'].' Has been created of category '.$l1_name.' has started on Xstok go and bid';
var currentyear = new Date().getFullYear();
var d = new Date();
lastyear = d.getFullYear() - 1;
localStorage.financialyear = lastyear + '-' + currentyear;
//localStorage.pay_type", serialize (array ("Auction", "EMD",));
localStorage.pay_type_auction = 'Auction';
localStorage.pay_type_emd = 'EMD';
localStorage.payment_type_bank_transfer = 'Bank Transfer';
localStorage.user_type_1 = 'Buyer';
localStorage.user_type_2 = 'Seller';
localStorage.pay_succ_info = 'Payment Has success';
localStorage.pay_error_info = 'Payment Has been Failed';
localStorage.trans_type_1 = 'R';
localStorage.trans_type_2 = 'P';
localStorage.payment_r = 'Receved';
localStorage.payment_n = 'Not Receved';
localStorage.order_status_1 = 'Shipment Request Pending';
localStorage.order_status_2 = 'Awaiting Payment';
localStorage.order_status_3 = 'Payment Under Process';
localStorage.order_status_4 = 'Payment Received';
localStorage.order_status_5 = 'Pending Shipment';
localStorage.order_status_6 = 'In Transit';
localStorage.order_status_7 = 'Deliverd';
localStorage.order_status_8 = 'Dispute';
localStorage.order_status_9 = 'Cancelled';
localStorage.order_status_10 = 'Closed';
localStorage.auction_won_pay_link = 'Pay Link';
localStorage.auction_won_shipment_pending = 'Shipment Request';
localStorage.order_status_shipment_request_pending = '1';
localStorage.order_status_awaiting_payment = '2';
localStorage.order_status_payment_under_process = '3';
localStorage.order_status_payment_received = '4';
localStorage.order_status_pending_shipment = '5';
localStorage.order_status_in_transit = '6';
localStorage.order_status_delivered = '7';
localStorage.order_status_dispute = '8';
localStorage.order_status_cancelled = '9';
localStorage.order_status_closed = '10';
localStorage.c_form_limit = 3;
localStorage.block_og_emd = "Blocked Orignal EMD";
localStorage.unblock_og_emd = "Unblocked Orignal EMD";
localStorage.TDS_amount = 10;
localStorage.discount = 'Discount';
localStorage.bid_now = 'Bid now';
localStorage.auto_bid_now = 'Autobid now';
localStorage.timeleft = 'Time Left';
localStorage.your_result__ = 'This auction is under Presale Review period. The bidding will take place on __st_date to __end_date.<br /><br /> Thank you for paying your EMD. You are all set to bid. Good luck!';
localStorage.your_interest__ = 'This auction is under Presale Review period. The bidding will start on __st_date to __end_date. <br /><br /> <b>This auctions requires EMD of <i class="fa fa-inr"></i> __rs (__x% of List Price) </b><br /><br />It takes 24 hrs to create an escrow account for first time buyers.<br /><br />Pay EMD now and be ready for bidding by clicking below.<br /><br />';
//localStorage.first_bid_msg__ = 'Confirm your bid of Rs. confirm_bid__  Note: this will block EMD of Rs. og_emd__.';
localStorage.first_bid_msg__ = 'Confirm your bid of Rs. confirm_bid__ unit_price_value__ Note: this will block EMD of Rs. og_emd__.';
localStorage.emd_bid_msg__ = 'You are registering interest in this auction. Your EMD of Rs. og_emd__ will be blocked.';
localStorage.direct_buy_now_popup_txt = 'Confirm direct Buy option.';
localStorage.block_emd_buy_now = 'Confirm Buy Now!  EMD of Rs. amount___ will be blocked';
localStorage.confirm_auto_choose_val_ = 'Your auto bid value doesn\'t match auction minimum increment value <br /> <br />Choose from one of the values below';
localStorage.confirm_offer_with_msg__ = 'Confirm offer of Rs. confirm_bid__. Note: If your offer is above the Reserve Price, EMD of Rs. og_emd__ will be blocked.';
localStorage.time_left__ = 'Time Left';
localStorage.presale_time_left = 'Review time left';
localStorage.presale = 'Presale Review';
localStorage.pay_emd = 'Pay EMD';
localStorage.emd_list_price_limit = 200000;
localStorage.not_participating__ = 'You are not participating in this auction';
localStorage.increase_bid__ = 'Update Offer';
localStorage.offer_bid_place_error = 'Offer should be higher than the current price';
localStorage.offer_bid_place_error_unit_price = 'Offer should be higher than the per unit price';
localStorage.bid_place_error_unit_price_100_reserve = 'You have entered Per Unit value more than 100% of Reserve price';
localStorage.bid_place_error_price_100_reserve = 'You have entered value more than 100% of Reserve price';
localStorage.offer_multiple_of = 'Offer must be multiple of ';
localStorage.s_winner__ = 'Winner';
localStorage.ext_time = 'Extended time 2 mins';
localStorage.final_my_bid__ = 'Final Price';
localStorage.your_offer_high = 'Your offer is the highest';
localStorage.your_offer_not_high = 'Your offer is not highest';
localStorage.reserve_price_not_met_ = 'Reserve price not met';
localStorage.reserve_price_met_ = 'Reserve price met';
localStorage.confirm_auto_choose_val_ = "Your auto bid value doesn't match auction minimum increment value <br /> <br />Choose from one of the values below";
localStorage.confirm_100_per_auto_bid = "You have entered price of more than 100% of the start value. Do you wish to continue?";
localStorage.hide_list_p_percent = 1;
localStorage.supp_id_list_array = [1470, 1868];
/*----------------DEFINED END-------------------*/

function back() {
    window.history.back();
}
function x_alert(data) {
    //alert(data);
    navigator.notification.alert(data);
}
function auction_detail(id, auc_type_id) {
    // alert(id);
    //window.location.href = 'auction_detail.html#' + id;
    if (auc_type_id == localStorage.closed_bid_auction) {
        window.location.href = 'closed_bid_auction.html#' + id;
        // include_once 'closed_bid_auction.php'
    } else if (auc_type_id == localStorage.curate_auction) {
        window.location.href = 'curate_auction.html#' + id;
        //include_once 'curate_auction.php';
    } else if (auc_type_id == localStorage.private_auction) {
        window.location.href = 'private_auction.html#' + id;
        //include_once 'private_auction.php';
    } else if (auc_type_id == localStorage.assorted_auction) {
        window.location.href = 'assorted_auction.html#' + id;
        //include_once 'assorted_auction.php';
    } else if (auc_type_id == localStorage.reserve_value_auction) {
        window.location.href = 'reserve_value_auction.html#' + id;
        //include_once 'assorted_auction.php';
    }
}
function coming_soon() {
    x_alert('This auction will become live soon. We will notify you when it becomes live.');
}
function auction_room(lot_id, room_id) {
    window.location.href = 'auction_room.html#' + lot_id + '-' + room_id;
}
function shipping_detail(lot_id, room_id) {
    window.location.href = 'shipping_detail.html#' + lot_id + '-' + room_id;
}
function date_fution(date) {
    var dateStr = date; //returned from mysql timestamp/datetime field
    var a = dateStr.split(" ");
    var d = a[0].split("-");
    var t = a[1].split(":");
    var start_date = new Date(d[0], (d[1] - 1), d[2], t[0], t[1], t[2]);
    return start_date;
}
function redirect(location, hash) {
    if (typeof hash === 'undefined') {
        hash = '';
    } else {
        hash = '#' + hash;
    }
    if (window.location.href.indexOf("dashboard") > -1) // This doesn't work, any suggestions?
    {
        if (location == 'dashboard' && hash == '#watchlist') {
            menu_close();
            $('.watchlist').click();
        } else if (location == 'dashboard' && hash == '#notification') {
            menu_close();
            $('.notification').click();
        } else if (location == 'dashboard' && hash == '#active-auction') {
            menu_close();
            $('.active-auction').click();
        } else {
            window.location.href = location + ".html" + hash;
        }
    } else {
        window.location.href = location + ".html" + hash;
    }
}
function home_select(search_category, search_category_name, search_table_name) {
    if (localStorage.logged_in == '1') {
        localStorage.search_category = search_category;
        localStorage.search_table_name = search_table_name;
        localStorage.search_category_name = search_category_name;
        redirect('search');
    } else {
        redirect('signin');
    }
}
function all_listing() {
    localStorage.search_category = '';
    localStorage.search_category_name = 'All Category';
    localStorage.search_table_name = '';
    window.location.href = "search.html";
}
function add_contact() {
    var contact = navigator.contacts.create();
    contact.displayName = "XSTOK Support";
    contact.nickname = "XSTOK";       //specify both to support all devices

    var phoneNumbers = [];
    phoneNumbers[0] = new ContactField('mobile', '+919833273172', true);
    contact.phoneNumbers = phoneNumbers;
    var emails = [];
    emails[0] = new ContactField('work', 'info@xstok.com', true);
    contact.emails = emails;
    contact.name = "XSTOK";

    // save to device
    contact.save(add_contact_onSuccess, add_contact_onError);
}

function add_contact_onSuccess(contact) {
    if (device.platform == "Android") {
        if (localStorage.contact == 1) {
            cordova.plugins.Whatsapp.send("9833273172");
        } else {
            setTimeout(function () {
                localStorage.contact = 1;
                cordova.plugins.Whatsapp.send("9833273172");
            }, 3000);
        }
    }
}

function add_contact_onError(contactError) {
    // alert("Error = " + contactError.code);
}

function add_menu(type, show_logo, options,events) {
    var type_menu = 'x-orange';
    var show_logo_menu = 'hide';
    var options_menu = 'hide';
    var events_menu = 'hide';
    if (typeof type == 'undefined') {
        type = 0;
    }
    if (typeof show_logo == 'undefined') {
        show_logo = 0;
    }
    if (typeof options == 'undefined') {
        options = 0;
    }
    if (typeof events == 'undefined') {
        events = 0;
    }
    if (type == 0) {
        type_menu = '';
    } else if (type == 2) {
        type_menu = 'xstok-text-black'
    }
    if (show_logo == 1) {
        show_logo_menu = '';
    }
    if (events == 1) {
        events_menu = '';
    }
    if (options == 1) {
        options_menu = '';
    }
    if(localStorage.toggle == 'gird') {
        var view = 'view_list';
        var view_type = 'grid';
    } else {
        var view = 'view_module';
         var view_type = 'list';
    }
    $('#menu-add').html('<ul id="slide-out" class="side-nav grey lighten-5"><li class="padding-top-15 left-align main"><span class="image-menu"><img src="images/user.jpg" class="circle profile-image-img left" alt="Profile Picture"></span><br><span class="name-menu"><a class="white-text line-height-1" href="profile.html">Shadab Shaikh</a></span><br><span class="company-menu">Shasha Pvt ltd</span></li><li><a href="home.html"><i class="mdi-action-home"></i> Home</a></li><li><a href="#!"><i class="mdi-social-public"></i> All Auctions</a></li><li><a href="dash.html"><i class="mdi-social-poll"></i> Dashboard</a></li><li><a href="auction_room.html"><i class="material-icons tiny">store_mall_directory</i> Room Page</a></li><li><a href="watchlist.html"><i class="mdi-editor-insert-invitation"></i>  Watch List</a></li><li><a href="#!"><i class="mdi-editor-insert-invitation"></i>  Calendar</a></li><li class="no-padding"><ul class="collapsible collapsible-accordion"><li><a class="collapsible-header">Dropdown<i class="mdi-navigation-arrow-drop-down"></i></a><div class="collapsible-body"><ul><li><a href="#!">First</a></li><li><a href="#!">Second</a></li><li><a href="#!">Third</a></li><li><a href="#!">Fourth</a></li></ul></div></li></ul></li></ul><a href="#" data-activates="slide-out" class="button-collapse ' + type_menu + '"><i class="mdi-navigation-menu"></i></a><a href="#" class="right  height-56 ' + show_logo_menu + '"><img class="height-56" src="images/logo.png"></a><a href="#" class="font-24 '+events_menu+'">Events</a><a href="#" class="button-grid ' + options_menu + '" view="'+view_type+'"><i class="material-icons" style="font-size: 30px;">'+view+'</i></a><a href="#" class="button-search ' + options_menu + '"><div class="input-field"><input id="search" type="search" required><label for="search"><i class="material-icons" style="font-size: 25px;">search</i></label></div></a>');
    $('.button-collapse').sideNav({
        menuWidth: 300, // Default is 240
        edge: 'left', // Choose the horizontal origin
        closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
    });
}

function no_result(data) {
    if (data == 'undefined') {
        data = '';
    }
    var body = '<li class="no-result"><div class="oops-image hide"><img src="images/oops.png"/></div><div class=" oops-subtext-main">Sorry your search had no results</div><div class="oops-subtext">We don`t seem to have what you are looking for,<br><a onclick="search_feedback()" class="x-orange">click here</a> and we try to get it for you.</div></li>';
    if (data != '') {
        //console.log('no-result = > '+$('.no-result').length);
        if ($('.no-result').length == 0) {
            $('.search-list').append(body);
        }
        //$('.load').remove();
        $('.no-result').show();
        //if($('.no-result').is(':visible')) {
        //$('.load').remove();
        // }
    } else {
        $('.search-list').html(body);
    }
}
function search_loader () {
    $('.search-list').html();
    $('.search-list').html('<li class="center-align no-shadow"><div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue-only loader-round"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div></li> ');
}
function rc4_er(string) {
    return bin2hex(rc4_fun(localStorage.key_code, string.toString()).toString());
}


function rc4_dr(string) {
    return rc4_fun(localStorage.key_code, hex2bin(string.toString())).toString();
}

function heart(lot_id, room_id, auc_type_id) {
    $.ajax({
        type: "POST",
        url: localStorage.host + '../classes/service_manage_auction.class.php?action=save_wishlist_details',
        data: {l_: lot_id, r_: room_id, u_: localStorage.user_id, au_: auc_type_id},
        success: function (data) {
            if (data == 'success') {
                $('#heart' + lot_id + room_id).html('<i class="fa fa-heart x-red"></i>');
            } else {
                $('#heart' + lot_id + room_id).html('<i class="fa fa-heart"></i>');
            }
        }
    });
}

function bin2hex(s) {
    //  discuss at: http://phpjs.org/functions/bin2hex/
    // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // bugfixed by: Onno Marsman
    // bugfixed by: Linuxworld
    // improved by: ntoniazzi (http://phpjs.org/functions/bin2hex:361#comment_177616)
    //   example 1: bin2hex('Kev');
    //   returns 1: '4b6576'
    //   example 2: bin2hex(String.fromCharCode(0x00));
    //   returns 2: '00'

    var i, l, o = '',
            n;
    s += '';
    for (i = 0, l = s.length; i < l; i++) {
        n = s.charCodeAt(i)
                .toString(16);
        o += n.length < 2 ? '0' + n : n;
    }

    return o;
}

function hex2bin(hex)
{
    var bytes = [], str;
    for (var i = 0; i < hex.length - 1; i += 2)
        bytes.push(parseInt(hex.substr(i, 2), 16));
    return String.fromCharCode.apply(String, bytes);
}

function rc4_fun(key, str) {
    var s = [], j = 0, x, res = '';
    for (var i = 0; i < 256; i++) {
        s[i] = i;
    }
    for (i = 0; i < 256; i++) {
        j = (j + s[i] + key.charCodeAt(i % key.length)) % 256;
        x = s[i];
        s[i] = s[j];
        s[j] = x;
    }
    i = 0;
    j = 0;
    for (var y = 0; y < str.length; y++) {
        i = (i + 1) % 256;
        j = (j + s[i]) % 256;
        x = s[i];
        s[i] = s[j];
        s[j] = x;
        res += String.fromCharCode(str.charCodeAt(y) ^ s[(s[i] + s[j]) % 256]);
    }
    return res;
}

function number_format(number, decimals, dec_point, thousands_sep) {
    //   example 1: number_format(1234.56);
    //   returns 1: '1,235'
    //   example 2: number_format(1234.56, 2, ',', ' ');
    //   returns 2: '1 234,56'
    //   example 3: number_format(1234.5678, 2, '.', '');
    //   returns 3: '1234.57'
    //   example 4: number_format(67, 2, ',', '.');
    //   returns 4: '67,00'
    //   example 5: number_format(1000);
    //   returns 5: '1,000'
    //   example 6: number_format(67.311, 2);
    //   returns 6: '67.31'
    //   example 7: number_format(1000.55, 1);
    //   returns 7: '1,000.6'
    //   example 8: number_format(67000, 5, ',', '.');
    //   returns 8: '67.000,00000'
    //   example 9: number_format(0.9, 0);
    //   returns 9: '1'
    //  example 10: number_format('1.20', 2);
    //  returns 10: '1.20'
    //  example 11: number_format('1.20', 4);
    //  returns 11: '1.2000'
    //  example 12: number_format('1.2000', 3);
    //  returns 12: '1.200'
    //  example 13: number_format('1 000,50', 2, '.', ' ');
    //  returns 13: '100 050.00'
    //  example 14: number_format(1e-8, 8, '.', '');
    //  returns 14: '0.00000001'

    number = (number + '')
            .replace(/[^0-9+\-Ee.]/g, '');
    var n = !isFinite(+number) ? 0 : +number,
            prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),
            sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,
            dec = (typeof dec_point === 'undefined') ? '.' : dec_point,
            s = '',
            toFixedFix = function (n, prec) {
                var k = Math.pow(10, prec);
                return '' + (Math.round(n * k) / k)
                        .toFixed(prec);
            };
    // Fix for IE parseFloat(0.55).toFixed(0) = 0;
    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n))
            .split('.');
    if (s[0].length > 3) {
        s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);
    }
    if ((s[1] || '')
            .length < prec) {
        s[1] = s[1] || '';
        s[1] += new Array(prec - s[1].length + 1)
                .join('0');
    }
    return s.join(dec);
}
